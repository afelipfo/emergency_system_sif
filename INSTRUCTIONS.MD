# Prompt para v0: Sistema de Reportes de Emergencias DAGRD - Secretar√≠a de Infraestructura F√≠sica de Medell√≠n

## Contexto del Proyecto
Sistema de gesti√≥n de emergencias 100% autom√°tico para el **Departamento Administrativo de Gesti√≥n del Riesgo de Desastres (DAGRD)** y la **Secretar√≠a de Infraestructura F√≠sica de Medell√≠n**. El sistema procesa reportes de audio enviados por WhatsApp sobre emergencias de infraestructura (deslizamientos, colapsos viales, afectaciones a malla vial, inundaciones, da√±os estructurales), los estructura mediante IA, y permite consultas hist√≥ricas en lenguaje natural[1][2].

## Stack Tecnol√≥gico
- **Frontend:** Next.js 14+ (App Router) + TypeScript + Tailwind CSS + shadcn/ui
- **Backend:** Next.js API Routes + Vercel Serverless Functions
- **Base de Datos:** Supabase (PostgreSQL + pgvector para embeddings RAG)
- **Autenticaci√≥n:** Supabase Auth
- **Storage:** Supabase Storage (audios de WhatsApp)
- **Deployment:** Vercel (Edge Network)
- **Integraci√≥n IA:** OpenAI API (GPT-4.1-mini) + Whisper API para transcripci√≥n
- **Webhook Receiver:** Vercel Serverless Functions con endpoints p√∫blicos

## Arquitectura Supabase + Vercel

### Esquema de Base de Datos Supabase

```sql
-- Tabla de reportes estructurados
CREATE TABLE reportes_emergencia (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  fecha_hora_reporte TIMESTAMP WITH TIME ZONE NOT NULL,
  tipo_emergencia TEXT NOT NULL, -- 'Deslizamiento', 'Colapso Vial', 'Inundaci√≥n', etc.
  ubicacion_texto TEXT NOT NULL,
  comuna TEXT,
  corregimiento TEXT,
  barrio TEXT,
  coordenadas GEOGRAPHY(POINT),
  gravedad TEXT CHECK (gravedad IN ('Baja', 'Media', 'Alta', 'Cr√≠tica')),
  resumen_ejecutivo TEXT,
  transcripcion_original TEXT,
  audio_url TEXT, -- URL de Supabase Storage
  responsable_campo TEXT,
  responsable_telefono TEXT,
  metros_afectados NUMERIC,
  metros_cubicos_estimados NUMERIC,
  requiere_maquinaria BOOLEAN DEFAULT false,
  maquinaria_requerida TEXT[],
  requiere_evacuacion BOOLEAN DEFAULT false,
  estado TEXT DEFAULT 'Pendiente' CHECK (estado IN ('Pendiente', 'En Proceso', 'Atendido', 'Requiere Seguimiento')),
  coordinado_bomberos BOOLEAN DEFAULT false,
  metadata JSONB, -- JSON completo del LLM
  embedding vector(1536) -- Para b√∫squeda sem√°ntica RAG con pgvector
);

-- Tabla de responsables de campo
CREATE TABLE responsables_campo (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  nombre_completo TEXT NOT NULL,
  cargo TEXT NOT NULL,
  telefono_whatsapp TEXT UNIQUE NOT NULL,
  zona_asignada TEXT,
  activo BOOLEAN DEFAULT true,
  ultimo_reporte TIMESTAMP WITH TIME ZONE
);

-- Tabla de receptores de alertas
CREATE TABLE receptores_alertas (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  nombre_completo TEXT NOT NULL,
  cargo TEXT NOT NULL,
  telefono_whatsapp TEXT UNIQUE NOT NULL,
  recibe_alertas_criticas BOOLEAN DEFAULT true,
  recibe_alertas_altas BOOLEAN DEFAULT true,
  comunas_interes TEXT[],
  activo BOOLEAN DEFAULT true
);

-- Tabla de intervenciones realizadas
CREATE TABLE intervenciones (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  reporte_id UUID REFERENCES reportes_emergencia(id) ON DELETE CASCADE,
  fecha_intervencion TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  tipo_accion TEXT NOT NULL, -- 'Remoci√≥n Material', 'Terraceo', 'Estudios T√©cnicos', etc.
  metros_cubicos_removidos NUMERIC,
  maquinaria_utilizada TEXT[],
  cuadrilla_asignada TEXT,
  costo_estimado NUMERIC,
  observaciones TEXT,
  completada BOOLEAN DEFAULT false
);

-- Tabla de consultas hist√≥ricas (para analytics)
CREATE TABLE consultas_historicas (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  usuario_id UUID,
  pregunta TEXT NOT NULL,
  respuesta TEXT,
  reportes_recuperados UUID[],
  tiempo_respuesta_ms INTEGER
);

-- √çndices para optimizaci√≥n
CREATE INDEX idx_reportes_fecha ON reportes_emergencia(fecha_hora_reporte DESC);
CREATE INDEX idx_reportes_gravedad ON reportes_emergencia(gravedad);
CREATE INDEX idx_reportes_comuna ON reportes_emergencia(comuna);
CREATE INDEX idx_reportes_estado ON reportes_emergencia(estado);
CREATE INDEX idx_reportes_coordenadas ON reportes_emergencia USING GIST(coordenadas);

-- √çndice para b√∫squeda vectorial (RAG)
CREATE INDEX idx_reportes_embedding ON reportes_emergencia 
USING ivfflat (embedding vector_cosine_ops) WITH (lists = 100);

-- Row Level Security (RLS)
ALTER TABLE reportes_emergencia ENABLE ROW LEVEL SECURITY;
ALTER TABLE responsables_campo ENABLE ROW LEVEL SECURITY;
ALTER TABLE receptores_alertas ENABLE ROW LEVEL SECURITY;
ALTER TABLE intervenciones ENABLE ROW LEVEL SECURITY;

-- Pol√≠ticas de acceso (ejemplo b√°sico)
CREATE POLICY "Admins y responsables pueden ver reportes" 
ON reportes_emergencia FOR SELECT 
USING (auth.role() IN ('authenticated'));

CREATE POLICY "Solo admins pueden insertar reportes" 
ON reportes_emergencia FOR INSERT 
WITH CHECK (auth.jwt()->>'role' = 'admin');
```

### Estructura de Carpetas Next.js (Vercel)

```
/app
  /api
    /webhooks
      /whatsapp/route.ts          # Recibe webhooks de WhatsApp Business API
    /reportes
      /create/route.ts             # Procesa y crea reportes (LLM + embedding)
      /[id]/route.ts               # CRUD individual
      /list/route.ts               # Listado con filtros
    /consultas
      /rag/route.ts                # Endpoint de consulta hist√≥rica con RAG
    /intervenciones
      /route.ts                    # CRUD de intervenciones
    /alertas
      /distribuir/route.ts         # Env√≠a alertas masivas v√≠a WhatsApp
  /dashboard
    /page.tsx                      # Dashboard principal (1)
    /reportes
      /[id]/page.tsx               # Vista detallada reporte (2)
    /consultas/page.tsx            # Interface RAG (3)
    /configuracion/page.tsx        # Panel configuraci√≥n (4)
    /alertas/page.tsx              # Vista alertas (5)
    /estadisticas/page.tsx         # Panel estad√≠stico (6)
  /auth
    /login/page.tsx                # Login con Supabase Auth
  /components
    /dashboard
      /MetricCard.tsx
      /MapaMedellin.tsx            # Mapa interactivo con Leaflet/Mapbox
      /TimelineReportes.tsx
      /FiltrosReportes.tsx
    /reportes
      /DetalleReporte.tsx
      /FormularioIntervencion.tsx
    /consultas
      /ChatRAG.tsx
      /ResultadosRAG.tsx
    /ui                            # Componentes shadcn/ui
  /lib
    /supabase
      /client.ts                   # Cliente Supabase browser
      /server.ts                   # Cliente Supabase server
    /openai.ts                     # Utilidades OpenAI (LLM + embeddings)
    /whatsapp.ts                   # Cliente WhatsApp Business API
    /utils.ts                      # Helpers generales
/public
  /assets
    /logos                         # Logos DAGRD, SIF, Medell√≠n
```

## Componentes a Prototipar

### 1. Dashboard Principal de Monitoreo DAGRD (`/dashboard/page.tsx`)
Crea un dashboard moderno y responsivo para monitorear emergencias de infraestructura en tiempo real con:

**Layout y Estilo:**
- Dise√±o institucional Alcald√≠a de Medell√≠n con paleta: Naranja corporativo #FF6B00, azul institucional #003B7A, grises neutros, acentos de alerta
- Sidebar fijo con navegaci√≥n principal y logos de DAGRD + Secretar√≠a de Infraestructura F√≠sica (usar placeholders)
- Header con breadcrumbs, notificaciones en tiempo real (Supabase Realtime subscriptions), acceso directo a l√≠nea 123, y bot√≥n de logout
- Grid responsivo que colapsa a vista m√≥vil

**Secciones Requeridas:**
- **Tarjetas de m√©tricas superiores** (datos desde Supabase con SQL agregado):
  - Emergencias reportadas hoy (`COUNT(*) WHERE DATE(fecha_hora_reporte) = TODAY()`)
  - Eventos cr√≠ticos activos (`COUNT(*) WHERE gravedad = 'Cr√≠tica' AND estado != 'Atendido'`)
  - Tiempo promedio de respuesta DAGRD (`AVG(intervenciones.fecha_intervencion - reportes.fecha_hora_reporte)`)
  - Metros c√∫bicos removidos mes actual (`SUM(metros_cubicos_removidos)`)

- **Mapa interactivo de Medell√≠n** (usar react-leaflet o @vis.gl/react-google-maps):
  - Mostrar divisiones por 16 comunas + 5 corregimientos
  - Pines din√°micos por gravedad (colores: verde/amarillo/naranja/rojo)
  - Click en pin ‚Üí abrir modal con `DetalleReporte`
  - Heatmap opcional para zonas de alta concentraci√≥n
  - Datos en tiempo real desde Supabase con `supabase.channel().on('postgres_changes')`

- **Timeline en vivo** de √∫ltimos 10 reportes:
  - Componente `TimelineReportes` con auto-refresh cada 30s
  - Badges de estado y tipo de emergencia
  - Click ‚Üí navegar a `/dashboard/reportes/[id]`

- **Gr√°fico de barras** de tipos de emergencia (√∫ltimos 7 d√≠as):
  - Usar recharts o tremor para visualizaci√≥n
  - Tipos: Deslizamiento, Colapso Vial, Inundaci√≥n, Afectaci√≥n Malla Vial, Da√±o Estructural, Afectaci√≥n por Lluvias
  - Query Supabase con `GROUP BY tipo_emergencia`

- **Lista de Responsables de Campo activos**:
  - Tabla desde `responsables_campo` con `activo = true`
  - Indicador visual de √∫ltimo reporte (< 1h = verde, 1-6h = amarillo, > 6h = gris)

**Interactividad:**
- Componente `FiltrosReportes` con:
  - DateRangePicker para rango de fechas
  - Multi-select para tipo de emergencia
  - Dropdown de gravedad m√≠nima
  - Select de comuna/corregimiento
  - Toggle "Solo requiere maquinaria pesada"
- B√∫squeda en tiempo real por direcci√≥n/barrio (debounce 300ms, b√∫squeda full-text en Supabase)
- Todos los filtros actualizan URL query params para compartibilidad

**Conexi√≥n Supabase (ejemplo en c√≥digo):**
```typescript
// app/dashboard/page.tsx
'use client'
import { createClientComponentClient } from '@supabase/auth-helpers-nextjs'
import { useEffect, useState } from 'react'

export default function Dashboard() {
  const supabase = createClientComponentClient()
  const [reportes, setReportes] = useState([])
  const [metricas, setMetricas] = useState(null)

  useEffect(() => {
    // Cargar datos iniciales
    async function fetchData() {
      const {  reportesData } = await supabase
        .from('reportes_emergencia')
        .select('*')
        .order('fecha_hora_reporte', { ascending: false })
        .limit(10)
      
      setReportes(reportesData)
      
      // M√©tricas agregadas
      const {  metricasData } = await supabase
        .rpc('obtener_metricas_dashboard') // Stored procedure en Supabase
      
      setMetricas(metricasData)
    }
    
    fetchData()
    
    // Suscripci√≥n en tiempo real a nuevos reportes
    const channel = supabase
      .channel('reportes-cambios')
      .on('postgres_changes', 
        { event: 'INSERT', schema: 'public', table: 'reportes_emergencia' },
        (payload) => {
          setReportes((prev) => [payload.new, ...prev.slice(0, 9)])
          // Mostrar toast notification
        }
      )
      .subscribe()
    
    return () => {
      supabase.removeChannel(channel)
    }
  }, [])

  return (
    // JSX del dashboard
  )
}
```

### 2. Vista Detallada de Reporte de Emergencia (`/dashboard/reportes/[id]/page.tsx`)
P√°gina completa o modal para visualizar un reporte espec√≠fico:

**Estructura:**
- Header con ID de reporte (UUID corto), timestamp, y badge de gravedad
- **Secci√≥n de Metadatos** en formato grid de cards:
  - Tipo de emergencia con √≠cono (lucide-react: Mountain para deslizamiento, Construction para colapso vial, Droplets para inundaci√≥n)
  - Ubicaci√≥n exacta: direcci√≥n + comuna/corregimiento + barrio
  - Mini-mapa embebido (Google Maps Static API o Leaflet est√°tico)
  - Hora del reporte y responsable de campo
  - Estado de intervenci√≥n con select editable (actualiza Supabase en tiempo real)

- **Panel de Resumen Ejecutivo** destacado con fondo seg√∫n gravedad
- **Secci√≥n de Evaluaci√≥n T√©cnica**:
  - Magnitud: metros afectados / metros c√∫bicos estimados (editable por administradores)
  - Riesgo a infraestructura cr√≠tica cercana (checkbox)
  - Requiere maquinaria: chips editables con opciones (Retroexcavadora CAT, Volqueta, Motoniveladora, Compactador)

- **Transcripci√≥n Original** en panel expandible:
  - Texto completo de transcripci√≥n
  - Bot√≥n de reproducci√≥n de audio (audio_url desde Supabase Storage)
  - Player HTML5 audio con controles

- **Panel de Intervenciones** (tabla desde `intervenciones`):
  - Listado de acciones realizadas/planificadas
  - Bot√≥n "+ Nueva Intervenci√≥n" abre modal con formulario
  - Campos: Tipo acci√≥n, Metros c√∫bicos removidos, Maquinaria, Cuadrilla, Costo estimado, Observaciones
  - Al guardar ‚Üí INSERT en Supabase + actualizar estado del reporte

- **Footer con Acciones**:
  - "Asignar Cuadrilla" ‚Üí Modal con select de cuadrillas disponibles
  - "Coordinar con Bomberos" ‚Üí Toggle que marca `coordinado_bomberos = true` + env√≠a notificaci√≥n
  - "Marcar como Atendido" ‚Üí Actualiza `estado = 'Atendido'`
  - "Exportar Reporte PDF" ‚Üí Genera PDF con datos (usar jsPDF o react-pdf en API route)
  - "Solicitar Retroexcavadora" ‚Üí Crea ticket en sistema integrado (simulado)

**Conexi√≥n Supabase (ejemplo):**
```typescript
// app/dashboard/reportes/[id]/page.tsx
import { createServerComponentClient } from '@supabase/auth-helpers-nextjs'
import { cookies } from 'next/headers'

export default async function DetalleReportePage({ params }: { params: { id: string } }) {
  const supabase = createServerComponentClient({ cookies })
  
  const {  reporte, error } = await supabase
    .from('reportes_emergencia')
    .select(`
      *,
      intervenciones (
        id,
        fecha_intervencion,
        tipo_accion,
        metros_cubicos_removidos,
        completada
      )
    `)
    .eq('id', params.id)
    .single()
  
  if (error || !reporte) {
    return <div>Reporte no encontrado</div>
  }
  
  return (
    <DetalleReporte reporte={reporte} />
  )
}
```

### 3. Interface de Consulta Hist√≥rica RAG (`/dashboard/consultas/page.tsx`)
Panel para b√∫squedas en lenguaje natural usando pgvector:

**Dise√±o:**
- **Barra de b√∫squeda prominente** (input grande, centrado):
  - Placeholder: "Ej: ¬øCu√°ntos deslizamientos en San Antonio de Prado √∫ltimos 3 meses?"
  - Bot√≥n de env√≠o con √≠cono de sparkles (IA)
  - Loading state con spinner durante procesamiento

- **Consultas Sugeridas** (pills debajo del input):
  - "Emergencias Los Balsos √∫ltimos 30 d√≠as"
  - "Metros c√∫bicos removidos Altavista este a√±o"
  - "Colapsos viales Popular √∫ltima semana"
  - "Emergencias por lluvias Santa Elena temporada"
  - "Sectores con m√°s reportes cr√≠ticos"
  - Click en pill ‚Üí ejecuta consulta autom√°ticamente

- **√Årea de Resultados tipo Chat** (componente `ChatRAG`):
  - Pregunta del usuario en bubble derecho (naranja #FF6B00)
  - Respuesta generada por LLM en bubble izquierdo (gris claro)
  - Formato markdown en respuesta (usar react-markdown)
  - Fuentes citadas como chips clickeables que abren el reporte detallado

- **Secci√≥n "Reportes Relacionados Recuperados"**:
  - Grid de 3-5 cards compactos con los reportes m√°s relevantes del RAG
  - Cada card muestra: fecha, comuna, tipo emergencia, resumen corto, metros c√∫bicos, bot√≥n "Ver completo"
  - Score de relevancia (similaridad coseno) en badge opcional

**Funcionalidad:**
- Input con autocompletado de comunas/corregimientos (Combobox de shadcn/ui)
- Historial de b√∫squedas recientes en sidebar colapsable (guardado en `consultas_historicas`)
- Botones de acci√≥n en respuesta:
  - "Generar Informe Estad√≠stico PDF"
  - "Crear Alerta Preventiva por Zona" (si detecta patr√≥n de riesgo)
- Loading state con skeleton screens durante consulta RAG (t√≠picamente 2-4 segundos)
- Filtro temporal opcional: "Solo considerar √∫ltimos X d√≠as/meses"

**Flujo Backend RAG (API Route):**
```typescript
// app/api/consultas/rag/route.ts
import { createRouteHandlerClient } from '@supabase/auth-helpers-nextjs'
import { OpenAI } from 'openai'
import { cookies } from 'next/headers'

const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY })

export async function POST(request: Request) {
  const { pregunta } = await request.json()
  const supabase = createRouteHandlerClient({ cookies })
  
  // 1. Generar embedding de la pregunta
  const embeddingResponse = await openai.embeddings.create({
    model: 'text-embedding-3-small',
    input: pregunta
  })
  const preguntaEmbedding = embeddingResponse.data[0].embedding
  
  // 2. B√∫squeda de similitud en Supabase con pgvector
  const {  reportesRelevantes } = await supabase.rpc('buscar_reportes_similares', {
    query_embedding: preguntaEmbedding,
    match_threshold: 0.7,
    match_count: 5
  })
  
  // 3. Construir contexto para el LLM
  const contexto = reportesRelevantes
    .map(r => `Reporte ID ${r.id}: ${r.fecha_hora_reporte} - ${r.tipo_emergencia} en ${r.ubicacion_texto}, ${r.comuna}. Gravedad: ${r.gravedad}. Resumen: ${r.resumen_ejecutivo}`)
    .join('\n\n')
  
  // 4. Generar respuesta con LLM
  const completion = await openai.chat.completions.create({
    model: 'gpt-4-turbo-preview',
    messages: [
      {
        role: 'system',
        content: `Eres un Archivista de Emergencias del DAGRD Medell√≠n. Responde SOLO bas√°ndote en los reportes hist√≥ricos proporcionados. Si no hay informaci√≥n, ind√≠calo claramente. Usa t√©rminos espec√≠ficos de Medell√≠n (comunas, corregimientos, barrios).`
      },
      {
        role: 'user',
        content: `Pregunta: ${pregunta}\n\nReportes Hist√≥ricos:\n${contexto}`
      }
    ],
    temperature: 0.3
  })
  
  const respuesta = completion.choices[0].message.content
  
  // 5. Guardar consulta en historial
  await supabase.from('consultas_historicas').insert({
    pregunta,
    respuesta,
    reportes_recuperados: reportesRelevantes.map(r => r.id),
    tiempo_respuesta_ms: Date.now() - startTime
  })
  
  return Response.json({ 
    respuesta, 
    reportes_relacionados: reportesRelevantes 
  })
}
```

**Stored Procedure en Supabase (pgvector search):**
```sql
-- Crear funci√≥n de b√∫squeda vectorial
CREATE OR REPLACE FUNCTION buscar_reportes_similares(
  query_embedding vector(1536),
  match_threshold float DEFAULT 0.7,
  match_count int DEFAULT 5
)
RETURNS TABLE (
  id uuid,
  fecha_hora_reporte timestamp with time zone,
  tipo_emergencia text,
  ubicacion_texto text,
  comuna text,
  gravedad text,
  resumen_ejecutivo text,
  similarity float
)
LANGUAGE plpgsql
AS $$
BEGIN
  RETURN QUERY
  SELECT
    re.id,
    re.fecha_hora_reporte,
    re.tipo_emergencia,
    re.ubicacion_texto,
    re.comuna,
    re.gravedad,
    re.resumen_ejecutivo,
    1 - (re.embedding <=> query_embedding) AS similarity
  FROM reportes_emergencia re
  WHERE 1 - (re.embedding <=> query_embedding) > match_threshold
  ORDER BY re.embedding <=> query_embedding
  LIMIT match_count;
END;
$$;
```

### 4. Panel de Configuraci√≥n del Sistema (`/dashboard/configuracion/page.tsx`)
Interfaz administrativa (solo para roles admin/superadmin):

**Tabs Principales (usar Tabs de shadcn/ui):**

**Tab 1: Conexi√≥n WhatsApp Business**
- Card con status de API:
  - Indicador visual (Badge: "Conectado" verde / "Desconectado" rojo)
  - Informaci√≥n del webhook: `https://tu-dominio.vercel.app/api/webhooks/whatsapp`
  - Token de verificaci√≥n (input readonly con bot√≥n copiar)
  - N√∫mero de tel√©fono empresarial DAGRD configurado
  - Bot√≥n "Test Webhook" que env√≠a mensaje de prueba
- Integraci√≥n con l√≠nea 123 (toggle activado/desactivado)

**Tab 2: Servicios IA**
- Select de proveedor Speech-to-Text:
  - Opciones: OpenAI Whisper, Google Cloud Speech-to-Text, Azure AI Speech
  - Input para API key (tipo password)
  - Bot√≥n "Test Transcripci√≥n" con upload de audio de prueba
  
- Select de modelo LLM:
  - Opciones: GPT-4.1-mini, GPT-4-turbo, Claude-3.5-Sonnet
  - Input para API key
  - Textarea para personalizar system prompt (reconocer jerga Medell√≠n: "loma", "ladera", "quebrada")
  - Slider para temperatura (0.0 - 1.0, default 0.3)
  - Bot√≥n "Test LLM" con transcripci√≥n de ejemplo

- Configuraci√≥n de embeddings:
  - Modelo: text-embedding-3-small / text-embedding-3-large
  - Match threshold para RAG (slider 0.5 - 0.9, default 0.7)

**Tab 3: Bases de Datos**
- Card Supabase PostgreSQL:
  - Status connection (badge verde/rojo)
  - URL del proyecto (readonly)
  - Estad√≠sticas: Total de reportes, Tama√±o DB, √öltimo backup
  - Bot√≥n "Sincronizar Ahora" (reindexar embeddings)
  - Logs de √∫ltima actualizaci√≥n (scroll list de √∫ltimos 10 eventos)

- Card pgvector (Base Vectorial):
  - Status del √≠ndice ivfflat
  - N√∫mero de vectores indexados
  - Tiempo promedio de b√∫squeda (ms)
  - Bot√≥n "Recrear √çndice" (para mantenimiento)

**Tab 4: Personal y Permisos**
- **Subtab: Responsables de Campo SIF**
  - Tabla con columns: Nombre, Cargo, Tel√©fono WhatsApp, Zona Asignada, Estado, √öltimo Reporte
  - DataTable de shadcn/ui con sorting, filtering, pagination
  - Botones: "+ Agregar Responsable", "Editar" (por fila), "Desactivar"
  - Modal de formulario con campos:
    - Input nombre completo
    - Select cargo (Ingeniero Supervisor, T√©cnico Vial, Coordinador Zonal)
    - Input tel√©fono con validaci√≥n formato colombiano (+57)
    - Multi-select zona asignada (comunas/corregimientos)
  - Al guardar ‚Üí INSERT/UPDATE en `responsables_campo` v√≠a API route

- **Subtab: Receptores de Alertas**
  - Tabla similar con: Nombre, Cargo, Tel√©fono, Recibe Cr√≠ticas, Recibe Altas, Comunas de Inter√©s, Estado
  - Formulario con:
    - Input nombre, cargo, tel√©fono
    - Toggles: "Recibir alertas cr√≠ticas", "Recibir alertas altas"
    - Multi-select comunas de inter√©s (array)
  - Integraci√≥n con directorio institucional (simulado con combobox de b√∫squeda)

- **Subtab: Zonas de Alto Riesgo Priorizadas**
  - Lista editable de sectores seg√∫n POT y estudios DAGRD
  - Campos: Nombre sector, Comuna, Tipo riesgo predominante, Prioridad (1-5)
  - Estas zonas reciben notificaci√≥n autom√°tica a receptores espec√≠ficos

**Est√©tica:**
- Forms con labels claros (Label de shadcn/ui)
- Validation states (error/success) en todos los inputs
- Toggle switches (Switch de shadcn/ui) para activar/desactivar servicios
- Badges de status en tiempo real que hacen polling cada 30s
- Toasts de confirmaci√≥n al guardar cambios
- Dialog de confirmaci√≥n para acciones destructivas (eliminar responsable, etc.)

### 5. Vista de Alertas Distribuidas (`/dashboard/alertas/page.tsx`)
Feed de notificaciones para directivos y equipos de respuesta:

**Layout:**
- Header con t√≠tulo "Alertas de Emergencia" y filtros inline
- **Filtros superiores** (toolbar compacto):
  - Tabs: Todas / No Atendidas / Por Gravedad / Por Comuna
  - Badge con contador de alertas sin leer
  - Toggle "Solo mostrar requieren evacuaci√≥n"
  - Select de comuna (opcional)

- **Feed de Alertas** (estilo tipo notificaciones):
  - Cards de alerta con dise√±o compacto y escaneable:
    - **Header del card:** 
      - Timestamp destacado (ej: "Hace 15 minutos" - usar date-fns formatDistanceToNow)
      - Badge de gravedad (colores institucionales)
      - Badge de tipo emergencia con √≠cono
    - **Body del card:**
      - Resumen ejecutivo conciso en negrita: "Deslizamiento en Cr. 43A #32-15, Barrio Los Balsos, El Poblado. Aprox. 160m altura. CR√çTICO - Requiere terraceo urgente"
      - Comuna/Corregimiento en badge peque√±o
      - Ubicaci√≥n como link clickeable (abre Google Maps en nueva pesta√±a)
    - **Footer del card:**
      - Estimaci√≥n de recursos en texto peque√±o: "Requiere: 2 retroexcavadoras, 4 volquetas, estudios geot√©cnicos"
      - Badge especial si "Coordinado con Bomberos 123" (azul)
      - Bot√≥n primario "Ver Detalles Completos" (navega a `/dashboard/reportes/[id]`)
      - Bot√≥n secundario "Coordinar Respuesta" (abre modal de acciones r√°pidas)

- **Sistema de Paginaci√≥n** al final (usar Pagination de shadcn/ui, 20 alertas por p√°gina)

- **Panel Lateral Colapsable** (opcional):
  - Resumen de alertas por gravedad (gr√°fico de donut peque√±o)
  - Top 3 comunas con m√°s alertas activas
  - Bot√≥n "Enviar Alerta Manual" (para pruebas)

**Interactividad:**
- Click en card completo ‚Üí navega a detalle del reporte
- Hover en card ‚Üí elevaci√≥n sutil (shadow-lg)
- Badge de "Nueva" para alertas < 5 minutos (pulsa con animaci√≥n)
- Auto-refresh cada 60 segundos con toast discreto "X nuevas alertas"
- Sonido opcional en navegador para alertas cr√≠ticas (usar Web Audio API, solo si usuario lo activa)

**Accesibilidad:**
- Alto contraste para alertas cr√≠ticas (texto blanco en fondo rojo)
- √çconos + texto (no solo color) para gravedad
- Textos descriptivos en aria-labels
- Responsive: en m√≥vil, cards son full-width y m√°s espaciados

**Conexi√≥n Tiempo Real:**
```typescript
// Suscripci√≥n a nuevas alertas
useEffect(() => {
  const channel = supabase
    .channel('nuevas-alertas')
    .on('postgres_changes',
      { 
        event: 'INSERT', 
        schema: 'public', 
        table: 'reportes_emergencia',
        filter: 'gravedad=in.(Cr√≠tica,Alta)'
      },
      (payload) => {
        // Agregar nueva alerta al estado
        setAlertas(prev => [payload.new, ...prev])
        // Mostrar toast notification
        toast({
          title: "Nueva Emergencia Cr√≠tica",
          description: payload.new.resumen_ejecutivo,
          variant: "destructive"
        })
        // Reproducir sonido si est√° habilitado
        if (notificacionesSonido) {
          playAlertSound()
        }
      }
    )
    .subscribe()
  
  return () => supabase.removeChannel(channel)
}, [])
```

### 6. Panel Estad√≠stico de Intervenciones SIF (`/dashboard/estadisticas/page.tsx`)
Dashboard complementario con m√©tricas operacionales:

**Visualizaciones (usar tremor o recharts):**

- **KPIs Superiores** (Grid de 4 tarjetas grandes):
  - Total emergencias atendidas a√±o en curso (query: `COUNT(*) WHERE YEAR(fecha_hora_reporte) = CURRENT_YEAR AND estado = 'Atendido'`)
  - Tiempo promedio de respuesta en horas (query con JOIN a `intervenciones`)
  - Porcentaje de emergencias resueltas < 48 horas (gauge chart)
  - Inversi√≥n estimada en intervenciones COP (suma de `costo_estimado`)

- **Gr√°fico de L√≠nea:** "Metros C√∫bicos de Material Removido por Mes"
  - √öltimos 12 meses en eje X
  - L√≠nea con puntos de datos
  - √Årea sombreada debajo de la l√≠nea
  - Tooltip con valor exacto
  - Query: `SELECT DATE_TRUNC('month', fecha_intervencion) AS mes, SUM(metros_cubicos_removidos) FROM intervenciones GROUP BY mes ORDER BY mes`

- **Gr√°fico de Barras Apiladas:** "Emergencias por Comuna"
  - 16 comunas + 5 corregimientos en eje X
  - Barras apiladas por tipo de emergencia (colores distintos)
  - Legend arriba o a la derecha
  - Query con `GROUP BY comuna, tipo_emergencia`

- **Heatmap:** "Zonas de Mayor Concentraci√≥n de Emergencias"
  - Mapa de Medell√≠n con overlay de calor
  - Usar react-leaflet con plugin de heatmap
  - Datos desde coordenadas geogr√°ficas en Supabase
  - Opci√≥n de filtrar por tipo de emergencia

- **Tabla Detallada:** "Top 10 Sectores Cr√≠ticos Recurrentes"
  - Columns: Nombre Sector, Comuna, N√∫mero de Eventos, Tipo Predominante, √öltima Intervenci√≥n, Acci√≥n
  - DataTable ordenable por n√∫mero de eventos (desc por defecto)
  - Bot√≥n "Ver Historial Completo" por fila
  - Query compleja con aggregaci√≥n por ubicaci√≥n similar

- **Secci√≥n "Temporada de Lluvias"** (accordion expandible):
  - Comparativa gr√°fico de l√≠neas: A√±o actual vs A√±o anterior vs Promedio 3 a√±os
  - Eje X: Semanas del a√±o (enfocado en abril-mayo, octubre-noviembre)
  - Eje Y: N√∫mero de reportes
  - Estad√≠sticas adicionales: Pico m√°ximo, Semana m√°s cr√≠tica, Incremento % vs a√±o anterior

**Funcionalidad:**
- **Filtros Globales** en toolbar superior:
  - DateRangePicker (rango de fechas customizable)
  - Multi-select tipo de emergencia
  - Select gravedad m√≠nima
  - Todos los gr√°ficos se actualizan al cambiar filtros

- **Botones de Exportaci√≥n:**
  - "Exportar a PDF" ‚Üí Genera reporte completo con todos los gr√°ficos (usar @react-pdf/renderer en API route)
  - "Exportar a Excel" ‚Üí Descarga datos tabulares (usar xlsx en API route)
  - "Compartir Dashboard" ‚Üí Genera URL temporal con filtros aplicados

- **Integraci√≥n con Obras en Ejecuci√≥n:**
  - Card adicional mostrando "Obras Activas SIF" (simulado)
  - Lista de proyectos en curso relacionados con sectores de alta incidencia
  - Link a sistema externo (Subsecretar√≠a Operativa SIF)

**Queries Optimizadas (Supabase RPC):**
```sql
-- Funci√≥n para m√©tricas del dashboard estad√≠stico
CREATE OR REPLACE FUNCTION obtener_estadisticas_panel(
  fecha_inicio date,
  fecha_fin date
)
RETURNS json
LANGUAGE plpgsql
AS $$
DECLARE
  resultado json;
BEGIN
  SELECT json_build_object(
    'total_emergencias', (
      SELECT COUNT(*) FROM reportes_emergencia 
      WHERE fecha_hora_reporte BETWEEN fecha_inicio AND fecha_fin
    ),
    'emergencias_atendidas', (
      SELECT COUNT(*) FROM reportes_emergencia 
      WHERE fecha_hora_reporte BETWEEN fecha_inicio AND fecha_fin 
      AND estado = 'Atendido'
    ),
    'tiempo_promedio_respuesta_horas', (
      SELECT AVG(EXTRACT(EPOCH FROM (i.fecha_intervencion - r.fecha_hora_reporte))/3600)
      FROM reportes_emergencia r
      INNER JOIN intervenciones i ON r.id = i.reporte_id
      WHERE r.fecha_hora_reporte BETWEEN fecha_inicio AND fecha_fin
      AND i.completada = true
    ),
    'inversion_total', (
      SELECT COALESCE(SUM(costo_estimado), 0)
      FROM intervenciones
      WHERE fecha_intervencion BETWEEN fecha_inicio AND fecha_fin
    ),
    'metros_cubicos_total', (
      SELECT COALESCE(SUM(metros_cubicos_removidos), 0)
      FROM intervenciones
      WHERE fecha_intervencion BETWEEN fecha_inicio AND fecha_fin
    )
  ) INTO resultado;
  
  RETURN resultado;
END;
$$;
```

## Flujo de Integraci√≥n WhatsApp ‚Üí Supabase ‚Üí Vercel

### Webhook Receiver (Vercel Serverless Function)
```typescript
// app/api/webhooks/whatsapp/route.ts
import { createRouteHandlerClient } from '@supabase/auth-helpers-nextjs'
import { OpenAI } from 'openai'
import { cookies } from 'next/headers'
import { headers } from 'next/headers'

const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY })
const WHATSAPP_VERIFY_TOKEN = process.env.WHATSAPP_VERIFY_TOKEN
const WHATSAPP_PHONE_NUMBER_ID = process.env.WHATSAPP_PHONE_NUMBER_ID
const WHATSAPP_ACCESS_TOKEN = process.env.WHATSAPP_ACCESS_TOKEN

// GET para verificaci√≥n del webhook (setup inicial)
export async function GET(request: Request) {
  const { searchParams } = new URL(request.url)
  const mode = searchParams.get('hub.mode')
  const token = searchParams.get('hub.verify_token')
  const challenge = searchParams.get('hub.challenge')
  
  if (mode === 'subscribe' && token === WHATSAPP_VERIFY_TOKEN) {
    return new Response(challenge, { status: 200 })
  }
  return new Response('Forbidden', { status: 403 })
}

// POST para recibir mensajes de WhatsApp
export async function POST(request: Request) {
  try {
    const body = await request.json()
    
    // Verificar que es un mensaje de audio
    const entry = body.entry?.[0]
    const changes = entry?.changes?.[0]
    const value = changes?.value
    const message = value?.messages?.[0]
    
    if (message?.type !== 'audio') {
      return Response.json({ status: 'ignored' })
    }
    
    const audioId = message.audio.id
    const fromNumber = message.from
    
    // 1. Descargar audio desde WhatsApp
    const audioUrl = await descargarAudioWhatsApp(audioId)
    const audioBuffer = await fetch(audioUrl).then(r => r.arrayBuffer())
    
    // 2. Subir audio a Supabase Storage
    const supabase = createRouteHandlerClient({ cookies })
    const fileName = `reportes/${Date.now()}_${audioId}.ogg`
    const {  uploadData, error: uploadError } = await supabase.storage
      .from('audios-reportes')
      .upload(fileName, audioBuffer, { contentType: 'audio/ogg' })
    
    if (uploadError) throw uploadError
    
    const audioUrlSupabase = supabase.storage
      .from('audios-reportes')
      .getPublicUrl(fileName).data.publicUrl
    
    // 3. Transcribir con OpenAI Whisper
    const transcripcion = await openai.audio.transcriptions.create({
      file: await fetch(audioUrl).then(r => r.blob()),
      model: 'whisper-1',
      language: 'es'
    })
    
    const textoTranscrito = transcripcion.text
    
    // 4. Procesar con LLM para extraer entidades
    const promptProcesamiento = `Eres un Analista de Emergencias del DAGRD Medell√≠n. Analiza esta transcripci√≥n de un reporte de emergencia de infraestructura y extrae la informaci√≥n en formato JSON.

IMPORTANTE: Reconoce t√©rminos locales de Medell√≠n como "loma", "ladera", "quebrada", comunas (Popular, Santa Cruz, etc.), corregimientos (San Antonio de Prado, Altavista, etc.).

Esquema JSON requerido:
{
  "tipo_emergencia": "Deslizamiento | Colapso Vial | Inundaci√≥n | Afectaci√≥n Malla Vial | Da√±o Estructural | Afectaci√≥n por Lluvias",
  "ubicacion_texto": "Direcci√≥n completa",
  "comuna": "Nombre de la comuna o corregimiento",
  "barrio": "Nombre del barrio si se menciona",
  "gravedad": "Baja | Media | Alta | Cr√≠tica",
  "resumen_ejecutivo": "1-2 frases concisas para alerta",
  "metros_afectados": n√∫mero o null,
  "metros_cubicos_estimados": n√∫mero o null,
  "requiere_maquinaria": boolean,
  "maquinaria_requerida": ["Retroexcavadora", "Volqueta", etc.] o [],
  "requiere_evacuacion": boolean
}

Transcripci√≥n: ${textoTranscrito}`

    const completion = await openai.chat.completions.create({
      model: 'gpt-4-turbo-preview',
      messages: [{ role: 'user', content: promptProcesamiento }],
      response_format: { type: 'json_object' },
      temperature: 0.2
    })
    
    const reporteJSON = JSON.parse(completion.choices[0].message.content)
    
    // 5. Generar embedding para RAG
    const embeddingResponse = await openai.embeddings.create({
      model: 'text-embedding-3-small',
      input: textoTranscrito
    })
    const embedding = embeddingResponse.data[0].embedding
    
    // 6. Buscar responsable de campo en Supabase
    const {  responsable } = await supabase
      .from('responsables_campo')
      .select('nombre_completo')
      .eq('telefono_whatsapp', fromNumber)
      .single()
    
    // 7. Guardar en Supabase
    const {  nuevoReporte, error: insertError } = await supabase
      .from('reportes_emergencia')
      .insert({
        fecha_hora_reporte: new Date().toISOString(),
        tipo_emergencia: reporteJSON.tipo_emergencia,
        ubicacion_texto: reporteJSON.ubicacion_texto,
        comuna: reporteJSON.comuna,
        barrio: reporteJSON.barrio,
        gravedad: reporteJSON.gravedad,
        resumen_ejecutivo: reporteJSON.resumen_ejecutivo,
        transcripcion_original: textoTranscrito,
        audio_url: audioUrlSupabase,
        responsable_campo: responsable?.nombre_completo || 'Desconocido',
        responsable_telefono: fromNumber,
        metros_afectados: reporteJSON.metros_afectados,
        metros_cubicos_estimados: reporteJSON.metros_cubicos_estimados,
        requiere_maquinaria: reporteJSON.requiere_maquinaria,
        maquinaria_requerida: reporteJSON.maquinaria_requerida,
        requiere_evacuacion: reporteJSON.requiere_evacuacion,
        meta reporteJSON,
        embedding: JSON.stringify(embedding)
      })
      .select()
      .single()
    
    if (insertError) throw insertError
    
    // 8. Distribuir alertas a receptores (filtrados por gravedad y comunas)
    if (reporteJSON.gravedad === 'Cr√≠tica' || reporteJSON.gravedad === 'Alta') {
      await distribuirAlertas(nuevoReporte)
    }
    
    // 9. Enviar confirmaci√≥n al responsable de campo
    await enviarMensajeWhatsApp(
      fromNumber,
      `‚úÖ Reporte recibido y procesado.\n\nID: ${nuevoReporte.id.slice(0, 8)}\nTipo: ${reporteJSON.tipo_emergencia}\nGravedad: ${reporteJSON.gravedad}\n\nEl DAGRD ha sido notificado.`
    )
    
    return Response.json({ status: 'processed', reporte_id: nuevoReporte.id })
    
  } catch (error) {
    console.error('Error procesando webhook:', error)
    return Response.json({ error: error.message }, { status: 500 })
  }
}

async function descargarAudioWhatsApp(audioId: string): Promise<string> {
  // Obtener URL del audio desde WhatsApp API
  const response = await fetch(
    `https://graph.facebook.com/v18.0/${audioId}`,
    {
      headers: {
        'Authorization': `Bearer ${WHATSAPP_ACCESS_TOKEN}`
      }
    }
  )
  const data = await response.json()
  return data.url
}

async function distribuirAlertas(reporte: any) {
  const supabase = createRouteHandlerClient({ cookies })
  
  // Obtener receptores seg√∫n criterios
  const {  receptores } = await supabase
    .from('receptores_alertas')
    .select('*')
    .eq('activo', true)
    .or(`recibe_alertas_criticas.eq.true,recibe_alertas_altas.eq.true`)
    // Filtrar tambi√©n por comunas_interes si aplica
  
  const mensajeAlerta = `üö® ALERTA DAGRD - ${reporte.gravedad.toUpperCase()}

${reporte.tipo_emergencia}
üìç ${reporte.ubicacion_texto}
üèòÔ∏è ${reporte.comuna}${reporte.barrio ? ` - ${reporte.barrio}` : ''}

${reporte.resumen_ejecutivo}

${reporte.requiere_evacuacion ? '‚ö†Ô∏è REQUIERE EVACUACI√ìN' : ''}
${reporte.requiere_maquinaria ? `üöú Maquinaria: ${reporte.maquinaria_requerida.join(', ')}` : ''}

ID: ${reporte.id.slice(0, 8)}
Ver detalles: ${process.env.NEXT_PUBLIC_APP_URL}/dashboard/reportes/${reporte.id}`

  // Enviar a cada receptor
  for (const receptor of receptores || []) {
    await enviarMensajeWhatsApp(receptor.telefono_whatsapp, mensajeAlerta)
  }
}

async function enviarMensajeWhatsApp(to: string, mensaje: string) {
  await fetch(
    `https://graph.facebook.com/v18.0/${WHATSAPP_PHONE_NUMBER_ID}/messages`,
    {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${WHATSAPP_ACCESS_TOKEN}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        messaging_product: 'whatsapp',
        to: to,
        type: 'text',
        text: { body: mensaje }
      })
    }
  )
}
```

## Requisitos T√©cnicos Generales

**Stack Completo:**
- Next.js 14+ (App Router, React Server Components)
- TypeScript (strict mode)
- Tailwind CSS + shadcn/ui (todos los componentes de UI)
- Supabase (PostgreSQL + Auth + Storage + Realtime + pgvector)
- Vercel (deployment con Edge Network)
- Lucide React (iconograf√≠a completa)
- date-fns (manipulaci√≥n de fechas)
- recharts o tremor (gr√°ficos y visualizaciones)
- react-leaflet (mapas interactivos)
- react-markdown (renderizado de respuestas RAG)
- zod (validaci√≥n de schemas)

**Variables de Entorno (`.env.local`):**
```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
SUPABASE_SERVICE_ROLE_KEY=xxx

# OpenAI
OPENAI_API_KEY=sk-xxx

# WhatsApp Business
WHATSAPP_PHONE_NUMBER_ID=xxx
WHATSAPP_ACCESS_TOKEN=xxx
WHATSAPP_VERIFY_TOKEN=xxx

# App
NEXT_PUBLIC_APP_URL=https://dagrd-emergencias.vercel.app
```

**Configuraci√≥n Vercel:**
- Framework Preset: Next.js
- Build Command: `next build`
- Output Directory: `.next`
- Install Command: `npm install` o `pnpm install`
- Node.js Version: 20.x
- Regiones: San Francisco (us-west) para menor latencia con Colombia

**Datos Mock Realistas:**
- Comunas de Medell√≠n (16): Popular, Santa Cruz, Manrique, Aranjuez, Castilla, Doce de Octubre, Robledo, Villa Hermosa, Buenos Aires, La Candelaria, Laureles-Estadio, La Am√©rica, San Javier, El Poblado, Guayabal, Bel√©n
- Corregimientos (5): San Antonio de Prado, Altavista, San Crist√≥bal, Palmitas, Santa Elena
- Responsables de campo ejemplo:
  - "Ing. Carlos Quintero - Coordinador Zona Norte"
  - "T√©c. Andrea G√≥mez - Supervisora Corregimientos"
  - "Ing. Jaime Naranjo - Director Operativo SIF"
- Emergencias ejemplo con nomenclatura vial colombiana:
  - "Deslizamiento Cr. 43A #32-15, Los Balsos, El Poblado - 160m altura ladera - CR√çTICO"
  - "Hundimiento Cl. 107 #50-23, San Antonio de Prado - Afectaci√≥n v√≠a principal - ALTO"
  - "Desbordamiento quebrada Santa Elena Km 12 corregimiento Santa Elena - Arrastre material - MEDIO"
  - "Colapso carpeta asf√°ltica Cir. 75 #44-32, Laureles-Estadio - Hueco 3m di√°metro - ALTO"

## Flujo de Navegaci√≥n
1. Login (`/auth/login`) ‚Üí Dashboard Principal (`/dashboard`)
2. Dashboard ‚Üí Vista Detallada Reporte (click en timeline o pin mapa) ‚Üí `/dashboard/reportes/[id]`
3. Dashboard ‚Üí Consulta Hist√≥rica RAG (men√∫ lateral) ‚Üí `/dashboard/consultas`
4. Dashboard ‚Üí Panel Configuraci√≥n (header, √≠cono engranaje, solo admin) ‚Üí `/dashboard/configuracion`
5. Dashboard ‚Üí Vista Alertas (header, √≠cono campana con badge) ‚Üí `/dashboard/alertas`
6. Dashboard ‚Üí Panel Estad√≠stico (men√∫ lateral, "Informes y M√©tricas") ‚Üí `/dashboard/estadisticas`
7. Vista Detallada ‚Üí "Asignar Cuadrilla" ‚Üí Modal con select de equipos SIF
8. Cualquier vista ‚Üí Logout (dropdown en header)

## Priorizaci√≥n de Desarrollo
**Fase 1 (Core):** Dashboard Principal + Vista Detallada de Reporte + Webhook Receiver
**Fase 2 (RAG):** Interface de Consulta Hist√≥rica + B√∫squeda Vectorial
**Fase 3 (Alertas):** Vista de Alertas Distribuidas + Sistema de notificaciones tiempo real
**Fase 4 (Admin):** Panel de Configuraci√≥n + Gesti√≥n de personal
**Fase 5 (Analytics):** Panel Estad√≠stico + Exportaci√≥n de reportes

## Notas de Estilo Institucional Alcald√≠a de Medell√≠n

**Paleta de Colores:**
```css
/* Colores principales */
--naranja-medellin: #FF6B00;      /* Color oficial, CTAs principales */
--azul-institucional: #003B7A;     /* Headers, sidebar, enlaces */
--gris-corporativo: #505050;       /* Texto secundario */
--fondo-claro: #F5F5F5;            /* Fondo general modo claro */
--fondo-oscuro: #1A1A1A;           /* Fondo general modo oscuro */

/* Alertas */
--critica: #DC2626;                /* Rojo intenso */
--alta: #EA580C;                   /* Naranja fuerte */
--media: #F59E0B;                  /* Amarillo/√°mbar */
--baja: #16A34A;                   /* Verde */

/* Neutrales */
--gris-100: #F3F4F6;
--gris-200: #E5E7EB;
--gris-300: #D1D5DB;
--gris-700: #374151;
--gris-900: #111827;
```

**Tipograf√≠a:**
- Fuente principal: Inter o Roboto (sans-serif, alta legibilidad)
- Tama√±os: Base 16px, Headers 24px/20px/18px, Small 14px, Tiny 12px
- Pesos: Regular 400 (texto), Medium 500 (labels), Semibold 600 (subt√≠tulos), Bold 700 (headers)

**Espaciado:**
- Espaciado entre secciones: 24px (lg)
- Espaciado entre componentes: 16px (md)
- Espaciado interno cards: 20px padding
- Bordes redondeados: rounded-lg (8px) para cards, rounded-full para badges

**Animaciones:**
- Transiciones: 200ms para hover states, 300ms para modales/drawers
- Efectos: fadeIn, slideIn desde bottom, scale en hover
- Loading states: skeleton screens con shimmer effect

**Componentes Visuales:**
- Logos en header: Escudo de Medell√≠n + logo DAGRD + logo Secretar√≠a Infraestructura F√≠sica (usar placeholders SVG o im√°genes Next.js optimizadas)
- √çconos: Lucide React (consistentes en todo el sistema)
  - Mountain (deslizamiento)
  - Construction (colapso vial)
  - Droplets (inundaci√≥n)
  - AlertTriangle (alerta general)
  - Truck (maquinaria)
  - Users (cuadrillas)
- Sombras: shadow-sm para cards normales, shadow-md para cards elevados, shadow-lg para modales

**Accesibilidad:**
- Contraste m√≠nimo WCAG AA: 4.5:1 para texto normal
- Indicadores visuales + texto (no solo color) para estados
- aria-labels en todos los botones de acci√≥n
- Keyboard navigation completa (tab order l√≥gico)
- Focus visible en todos los elementos interactivos

***

Este prompt est√° completamente adaptado para implementaci√≥n en **v0 con stack Supabase + Vercel**, incluyendo esquemas de base de datos, API routes, integraci√≥n de servicios, y arquitectura serverless completa para el sistema de emergencias DAGRD Medell√≠n[1][2][3][4].

Fuentes
[1] DAGRD: gesti√≥n del riesgo en Medell√≠n https://www.medellin.gov.co/es/dagrd/
[2] Van 53.750 metros c√∫bicos de material removidos en ... https://vivirenelpoblado.com/van-53-750-metros-cubicos-de-material-removidos-en-puntos-criticos-por-lluvias-en-medellin/
[3] ‚úì Funciones de la Secretar√≠a de Infraestructura F√≠sica https://www.medellin.gov.co/es/secretaria-infraestructura-fisica/que-hace/
[4] Subdirecci√≥n de Manejo de Desastre en Medell√≠n - DAGRD https://www.medellin.gov.co/es/dagrd/manejo-de-desastres/
